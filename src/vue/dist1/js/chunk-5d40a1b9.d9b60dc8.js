(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d40a1b9"],{"2d3b":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"search"},[i("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),i("form",{attrs:{action:"/"}},[i("van-search",{attrs:{"show-action":"",placeholder:"请输入书名或者作者名"},on:{cancel:t.cancel,clear:t.clearFn,input:t.searchFn},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),i("div",{staticClass:"search-content",on:{click:function(s){return s.stopPropagation(),t.hide(s)}}},[i("div",{staticClass:"search-box"},[i("div",{staticClass:"title"},[t._v("热门搜索")]),i("div",{staticClass:"search-list"},t._l(t.searchData,(function(s,e){return i("span",{key:e,staticClass:"search-item",on:{click:function(i){return t.goBook(s)}}},[t._v(t._s(s.word))])})),0)]),i("div",{staticClass:"search-box clear"},[i("div",{staticClass:"title fl"},[t._v("搜索历史")]),i("div",{staticClass:"delete fr",on:{click:t.deleteAll}},[t._v("清空")]),i("div",{staticClass:"search-list"},t._l(t.history,(function(s,e){return i("span",{key:e,staticClass:"search-item"},[i("span",[t._v(t._s(s))]),i("span",{staticClass:"del-icon",on:{click:function(s){return t.deleteOne(e)}}},[t._v("x")])])})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"search-text"},t._l(t.searchText,(function(s,e){return i("div",{key:e,staticClass:"text",on:{click:function(i){return t.getHistory(s)}}},[t._v(t._s(s))])})),0)])],1)},a=[],o=(i("4160"),i("a434"),i("ac1f"),i("1276"),i("159b"),i("5530")),n=i("c428"),c=(i("5e5c"),i("2f62")),r=Object(c["a"])("saveDataFn"),h=r.mapState,l=r.mapMutations,u={components:{loading:n["a"]},data:function(){return{isLoading:!1,value:"",searchData:[],isShow:!1,searchText:[],history:[]}},created:function(){var t=this;if(this.getData(),localStorage.getItem("history")){var s=localStorage.getItem("history").split(",");s.forEach((function(s){t.history.push(s)}))}},computed:Object(o["a"])({},h(["saveHistory"])),methods:Object(o["a"])(Object(o["a"])({},l(["addHistory"])),{},{cancel:function(){this.$router.go(-1)},getData:function(){var t=this;this.isLoading=!0,this.axios({method:"get",url:"http://novel.kele8.cn/hot-books"}).then((function(s){200==s.status&&(t.searchData=s.data.newHotWords,t.isLoading=!1)})).catch((function(s){t.isLoading=!1,t.$toast("获取搜索热词失败")}))},goBook:function(t){this.addHistory(t.word),this.history.push(t.word),localStorage.setItem("history",this.history),this.$router.push({name:"Book",query:{id:t.book}})},searchFn:function(){var t=this;""!=this.value?(this.isShow=!0,this.axios({method:"get",url:"http://novel.kele8.cn/auto-complete",params:{query:this.value}}).then((function(s){200==s.status&&(t.searchText=s.data.keywords)})).catch((function(s){t.$toast("暂无数据")}))):this.isShow=!1},clearFn:function(){this.isShow=!1},hide:function(){this.isShow=!1},getHistory:function(t){this.value="",this.history.push(t),localStorage.setItem("history",this.history),this.tipsFn()},deleteAll:function(){this.history=[],localStorage.setItem("history",this.history),this.isHistory()},deleteOne:function(t){this.history.splice(t,1),localStorage.setItem("history",this.history),this.isHistory()},tipsFn:function(){this.$toast("下载追书神器APP体验更多功能")},isHistory:function(){0==localStorage.getItem("history").length&&localStorage.removeItem("history")}})},d=u,v=i("2877"),f=Object(v["a"])(d,e,a,!1,null,null,null);s["default"]=f.exports},"5e5c":function(t,s,i){}}]);
//# sourceMappingURL=chunk-5d40a1b9.d9b60dc8.js.map