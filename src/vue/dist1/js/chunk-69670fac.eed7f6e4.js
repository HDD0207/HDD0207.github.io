(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69670fac"],{"0ebc":function(t,a,s){"use strict";s.r(a);var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"security"},[s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回"},on:{"click-left":t.goBack}}),s("div",{staticClass:"v-cell"},[s("van-cell-group",[s("van-cell",{staticClass:"v-cell-box",attrs:{title:"修改密码","is-link":""},on:{click:t.changePass}}),s("van-cell",{staticClass:"v-cell-box",attrs:{title:"注销账号","is-link":""},on:{click:t.destroy}})],1)],1),s("div",{staticClass:"btnBox"},[s("van-button",{staticClass:"noLogin-btn",attrs:{round:!0,block:!0,type:"danger"},on:{click:t.noLogin}},[t._v("退出登录")])],1),s("van-popup",{style:{height:"26%"},attrs:{round:"",position:"bottom"},model:{value:t.isShow,callback:function(a){t.isShow=a},expression:"isShow"}},[s("div",{staticClass:"pass-box"},[s("van-form",{on:{submit:t.submitPass}},[s("van-field",{staticClass:"inp",attrs:{label:"旧密码",placeholder:"旧密码"},model:{value:t.passData.oldPass,callback:function(a){t.$set(t.passData,"oldPass",a)},expression:"passData.oldPass"}}),s("van-field",{staticClass:"inp",attrs:{type:"text",label:"新密码",placeholder:"新密码"},model:{value:t.passData.newPass,callback:function(a){t.$set(t.passData,"newPass",a)},expression:"passData.newPass"}}),s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{submit:t.submitPass}},[t._v("确认修改")])],1)],1)],1)])],1)},e=[],n={data:function(){return{isShow:!1,passData:{oldPass:"",newPass:""},passReg:{reg:/^\w{6,16}$/,msg:"密码格式不正确"}}},methods:{goBack:function(){this.$router.go(-1)},changePass:function(){this.isShow=!0},submitPass:function(){var t=this;if(this.passReg.reg.test(this.passData.newPass)){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var a=localStorage.getItem("__Tk");this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:a,password:this.passData.newPass,oldPassword:this.passData.oldPass}}).then((function(a){t.$toast.clear(),t.isShow=!1,"E001"==a.data.code?(t.$toast(a.data.msg),localStorage.removeItem("__Tk"),t.$router.push({name:"Login"})):t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()}))}else this.$toast(this.passReg.msg)},destroy:function(){var t=this;this.$dialog.confirm({title:"是否注销账号",message:"此操作不可逆,注销后数据无法恢复"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var a=localStorage.getItem("__Tk");t.axios({method:"post",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),"G001"==a.data.code?(localStorage.removeItem("__Tk"),t.$router.push({name:"Login"})):t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()}))})).catch((function(t){}))},noLogin:function(){this.$toast("已登出"),localStorage.removeItem("__Tk"),this.$router.push({name:"Login"})}}},i=n,l=(s("a2a1"),s("2877")),c=Object(l["a"])(i,o,e,!1,null,"6a995fd4",null);a["default"]=c.exports},"20ea":function(t,a,s){},a2a1:function(t,a,s){"use strict";var o=s("20ea"),e=s.n(o);e.a}}]);
//# sourceMappingURL=chunk-69670fac.eed7f6e4.js.map